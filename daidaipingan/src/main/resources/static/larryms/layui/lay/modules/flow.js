layui.define("jquery",function(e){"use strict";var p=layui.$,l=function(e){},g='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';l.prototype.load=function(e){var i,n,o,l,t=this,r=0;e=e||{};var a=p(e.elem);if(a[0]){var c=p(e.scrollElem||document),f=e.mb||50,m=!("isAuto"in e)||e.isAuto,u=e.end||"没有更多了",s=e.scrollElem&&e.scrollElem!==document,v="<cite>加载更多</cite>",y=p('<div class="layui-flow-more"><a href="javascript:;">'+v+"</a></div>");a.find(".layui-flow-more")[0]||a.append(y);var d=function(e,l){e=p(e),y.before(e),l=0==l||null,l?y.html(u):y.find("a").html(v),n=l,i=null,o&&o()},h=function(){i=!0,y.find("a").html(g),"function"==typeof e.done&&e.done(++r,d)};if(h(),y.find("a").on("click",function(){p(this);n||i||h()}),e.isLazyimg)var o=t.lazyimg({elem:e.elem+" img",scrollElem:e.scrollElem});return m?(c.on("scroll",function(){var o=p(this),t=o.scrollTop();l&&clearTimeout(l),n||(l=setTimeout(function(){var e=s?o.height():p(window).height(),l=s?o.prop("scrollHeight"):document.documentElement.scrollHeight;l-t-e<=f&&(i||h())},100))}),t):t}},l.prototype.lazyimg=function(e){var l,c=this,f=0;e=e||{};var m=p(e.scrollElem||document),u=e.elem||"img",s=e.scrollElem&&e.scrollElem!==document,v=function(l,e){var o=m.scrollTop(),t=o+e,i=s?function(){return l.offset().top-m.offset().top+o}():l.offset().top;if(i>=o&&i<=t&&!l.attr("src")){var n=l.attr("lay-src");layui.img(n,function(){var e=c.lazyimg.elem.eq(f);l.attr("src",n).removeAttr("lay-src"),e[0]&&r(e),f++})}},r=function(e,l){var o=s?(l||m).height():p(window).height(),t=m.scrollTop(),i=t+o;if(c.lazyimg.elem=p(u),e)v(e,o);else for(var n=0;n<c.lazyimg.elem.length;n++){var r=c.lazyimg.elem.eq(n),a=s?function(){return r.offset().top-m.offset().top+t}():r.offset().top;if(v(r,o),f=n,a>i)break}};if(r(),!l){var o;m.on("scroll",function(){var e=p(this);o&&clearTimeout(o),o=setTimeout(function(){r(null,e)},50)}),l=!0}return r},e("flow",new l)});