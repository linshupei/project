layui.define("jquery",function(e){"use strict";var c=layui.$,i=layui.hint(),n="layui-tree-enter",r=function(e){this.options=e},s={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};r.prototype.init=function(e){var o=this;e.addClass("layui-box layui-tree"),o.options.skin&&e.addClass("layui-tree-skin-"+o.options.skin),o.tree(e),o.on(e)},r.prototype.tree=function(t,e){var n=this,l=n.options,o=e||l.nodes;layui.each(o,function(e,o){var a=o.children&&o.children.length>0,i=c('<ul class="'+(o.spread?"layui-show":"")+'"></ul>'),r=c(["<li "+(o.spread?'data-spread="'+o.spread+'"':"")+">",function(){return a?'<i class="layui-icon layui-tree-spread">'+(o.spread?s.arrow[1]:s.arrow[0])+"</i>":""}(),function(){return l.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===l.check?s.checkbox[0]:"radio"===l.check?s.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(o.href||"javascript:;")+'" '+(l.target&&o.href?'target="'+l.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(a?"branch":"leaf")+'">'+(a?o.spread?s.branch[1]:s.branch[0]:s.leaf)+"</i>")+("<cite>"+(o.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));a&&(r.append(i),n.tree(i,o.children)),t.append(r),"function"==typeof l.click&&n.click(r,o),n.spread(r,o),l.drag&&n.drag(r,o)})},r.prototype.click=function(e,o){var a=this,i=a.options;e.children("a").on("click",function(e){layui.stope(e),i.click(o)})},r.prototype.spread=function(e,o){var a=this,i=(a.options,e.children(".layui-tree-spread")),r=e.children("ul"),t=e.children("a"),n=function(){e.data("spread")?(e.data("spread",null),r.removeClass("layui-show"),i.html(s.arrow[0]),t.find(".layui-icon").html(s.branch[0])):(e.data("spread",!0),r.addClass("layui-show"),i.html(s.arrow[1]),t.find(".layui-icon").html(s.branch[1]))};r[0]&&(i.on("click",n),t.on("dblclick",n))},r.prototype.on=function(e){var r=this,o=r.options,t="layui-tree-drag";e.find("i").on("selectstart",function(e){return!1}),o.drag&&c(document).on("mousemove",function(e){var o=r.move;if(o.from){var a=(o.to,c('<div class="layui-box '+t+'"></div>'));e.preventDefault(),c("."+t)[0]||c("body").append(a);var i=c("."+t)[0]?c("."+t):a;i.addClass("layui-show").html(o.from.elem.children("a").html()),i.css({left:e.pageX+10,top:e.pageY+10})}}).on("mouseup",function(){var e=r.move;e.from&&(e.from.elem.children("a").removeClass(n),e.to&&e.to.elem.children("a").removeClass(n),r.move={},c("."+t).remove())})},r.prototype.move={},r.prototype.drag=function(a,i){var r=this,e=(r.options,a.children("a")),o=function(){var e=c(this),o=r.move;o.from&&(o.to={item:i,elem:a},e.addClass(n))};e.on("mousedown",function(){var e=r.move;e.from={item:i,elem:a}}),e.on("mouseenter",o).on("mousemove",o).on("mouseleave",function(){var e=c(this),o=r.move;o.from&&(delete o.to,e.removeClass(n))})},e("tree",function(e){var o=new r(e=e||{}),a=c(e.elem);return a[0]?void o.init(a):i.error("layui.tree 没有找到"+e.elem+"元素")})});