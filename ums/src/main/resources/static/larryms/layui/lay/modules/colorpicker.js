layui.define("jquery",function(e){"use strict";var y=layui.jquery,o={config:{},index:layui.colorpicker?layui.colorpicker.index+1e4:0,set:function(e){var i=this;return i.config=y.extend({},i.config,e),i},on:function(e,i){return layui.onevent.call(this,"colorpicker",e,i)}},r=function(){var e=this,i=e.config;return{config:i}},i="colorpicker",t="layui-show",n="layui-colorpicker",l=".layui-colorpicker-main",x="layui-icon-down",C="layui-icon-close",P="layui-colorpicker-trigger-span",B="layui-colorpicker-trigger-i",w="layui-colorpicker-side",D="layui-colorpicker-side-slider",E="layui-colorpicker-basis",H="layui-colorpicker-alpha-bgcolor",W="layui-colorpicker-alpha-slider",j="layui-colorpicker-basis-cursor",F="layui-colorpicker-main-input",L=function(e){var i={h:0,s:0,b:0},o=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),t=r-o;return i.b=r,i.s=0!=r?255*t/r:0,0!=i.s?e.r==r?i.h=(e.g-e.b)/t:e.g==r?i.h=2+(e.b-e.r)/t:i.h=4+(e.r-e.g)/t:i.h=-1,r==o&&(i.h=0),i.h*=60,i.h<0&&(i.h+=360),i.s*=100/255,i.b*=100/255,i},f=function(e){var e=e.indexOf("#")>-1?e.substring(1):e;if(3==e.length){var i=e.split("");e=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]}e=parseInt(e,16);var o={r:e>>16,g:(65280&e)>>8,b:255&e};return L(o)},M=function(e){var i={},o=e.h,r=255*e.s/100,t=255*e.b/100;if(0==r)i.r=i.g=i.b=t;else{var n=t,l=(255-r)*t/255,c=(n-l)*(o%60)/60;360==o&&(o=0),o<60?(i.r=n,i.b=l,i.g=l+c):o<120?(i.g=n,i.b=l,i.r=n-c):o<180?(i.g=n,i.r=l,i.b=l+c):o<240?(i.b=n,i.r=l,i.g=n-c):o<300?(i.b=n,i.g=l,i.r=l+c):o<360?(i.r=n,i.g=l,i.b=n-c):(i.r=0,i.g=0,i.b=0)}return{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b)}},d=function(e){var i=M(e),o=[i.r.toString(16),i.g.toString(16),i.b.toString(16)];return y.each(o,function(e,i){1==i.length&&(o[e]="0"+i)}),o.join("")},Y=function(e){var i=/[0-9]{1,3}/g,o=e.match(i)||[];return{r:o[0],g:o[1],b:o[2]}},I=y(window),c=y(document),a=function(e){var i=this;i.index=++o.index,i.config=y.extend({},i.config,o.config,e),i.render()};a.prototype.config={color:"",size:null,alpha:!1,format:"hex",predefine:!1,colors:["#009688","#5FB878","#1E9FFF","#FF5722","#FFB800","#01AAED","#999","#c00","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgb(0, 186, 189)","rgb(255, 120, 0)","rgb(250, 212, 0)","#393D49","rgba(0,0,0,.5)","rgba(255, 69, 0, 0.68)","rgba(144, 240, 144, 0.5)","rgba(31, 147, 255, 0.73)"]},a.prototype.render=function(){var e=this,i=e.config,o=y(['<div class="layui-unselect layui-colorpicker">',"<span "+("rgb"==i.format&&i.alpha?'class="layui-colorpicker-trigger-bgcolor"':"")+">",'<span class="layui-colorpicker-trigger-span" ','lay-type="'+("rgb"==i.format?i.alpha?"rgba":"torgb":"")+'" ','style="'+function(){var e="";return i.color?(e=i.color,(i.color.match(/[0-9]{1,3}/g)||[]).length>3&&(i.alpha&&"rgb"==i.format||(e="#"+d(L(Y(i.color))))),"background: "+e):e}()+'">','<i class="layui-icon layui-colorpicker-trigger-i '+(i.color?x:C)+'"></i>',"</span>","</span>","</div>"].join("")),r=y(i.elem);i.size&&o.addClass("layui-colorpicker-"+i.size),r.addClass("layui-inline").html(e.elemColorBox=o),e.color=e.elemColorBox.find("."+P)[0].style.background,e.events()},a.prototype.renderPicker=function(){var e=this,i=e.config,o=e.elemColorBox[0],r=e.elemPicker=y(['<div id="layui-colorpicker'+e.index+'" data-index="'+e.index+'" class="layui-anim layui-anim-upbit layui-colorpicker-main">','<div class="layui-colorpicker-main-wrapper">','<div class="layui-colorpicker-basis">','<div class="layui-colorpicker-basis-white"></div>','<div class="layui-colorpicker-basis-black"></div>','<div class="layui-colorpicker-basis-cursor"></div>',"</div>",'<div class="layui-colorpicker-side">','<div class="layui-colorpicker-side-slider"></div>',"</div>","</div>",'<div class="layui-colorpicker-main-alpha '+(i.alpha?t:"")+'">','<div class="layui-colorpicker-alpha-bgcolor">','<div class="layui-colorpicker-alpha-slider"></div>',"</div>","</div>",function(){if(i.predefine){var o=['<div class="layui-colorpicker-main-pre">'];return layui.each(i.colors,function(e,i){o.push(['<div class="layui-colorpicker-pre'+((i.match(/[0-9]{1,3}/g)||[]).length>3?" layui-colorpicker-pre-isalpha":"")+'">','<div style="background:'+i+'"></div>',"</div>"].join(""))}),o.push("</div>"),o.join("")}return""}(),'<div class="layui-colorpicker-main-input">','<div class="layui-inline">','<input type="text" class="layui-input">',"</div>",'<div class="layui-btn-container">','<button class="layui-btn layui-btn-primary layui-btn-sm" colorpicker-events="clear">清空</button>','<button class="layui-btn layui-btn-sm" colorpicker-events="confirm">确定</button>',"</div","</div>","</div>"].join(""));e.elemColorBox.find("."+P)[0];y(l)[0]&&y(l).data("index")==e.index?e.removePicker(a.thisElemInd):(e.removePicker(a.thisElemInd),y("body").append(r)),a.thisElemInd=e.index,a.thisColor=o.style.background,e.position(),e.pickerEvents()},a.prototype.removePicker=function(e){var i=this;i.config;return y("#layui-colorpicker"+(e||i.index)).remove(),i},a.prototype.position=function(){var e=this,i=e.config,o=e.bindElem||e.elemColorBox[0],r=e.elemPicker[0],t=o.getBoundingClientRect(),n=r.offsetWidth,l=r.offsetHeight,c=function(e){return e=e?"scrollLeft":"scrollTop",document.body[e]|document.documentElement[e]},a=function(e){return document.documentElement[e?"clientWidth":"clientHeight"]},s=5,f=t.left,d=t.bottom;f-=(n-o.offsetWidth)/2,d+=s,f+n+s>a("width")?f=a("width")-n-s:f<s&&(f=s),d+l+s>a()&&(d=t.top>l?t.top-l:a()-l,d-=2*s),i.position&&(r.style.position=i.position),r.style.left=f+("fixed"===i.position?0:c(1))+"px",r.style.top=d+("fixed"===i.position?0:c())+"px"},a.prototype.val=function(){var e=this,i=(e.config,e.elemColorBox.find("."+P)),o=e.elemPicker.find("."+F),r=i[0],t=r.style.backgroundColor;if(t){var n=L(Y(t)),l=i.attr("lay-type");if(e.select(n.h,n.s,n.b),"torgb"===l&&o.find("input").val(t),"rgba"===l){var c=Y(t);if(3==(t.match(/[0-9]{1,3}/g)||[]).length)o.find("input").val("rgba("+c.r+", "+c.g+", "+c.b+", 1)"),e.elemPicker.find("."+W).css("left",280);else{o.find("input").val(t);var a=280*t.slice(t.lastIndexOf(",")+1,t.length-1);e.elemPicker.find("."+W).css("left",a)}e.elemPicker.find("."+H)[0].style.background="linear-gradient(to right, rgba("+c.r+", "+c.g+", "+c.b+", 0), rgb("+c.r+", "+c.g+", "+c.b+"))"}}else e.select(0,100,100),o.find("input").val(""),e.elemPicker.find("."+H)[0].style.background="",e.elemPicker.find("."+W).css("left",280)},a.prototype.side=function(){var l=this,c=l.config,a=l.elemColorBox.find("."+P),s=a.attr("lay-type"),f=l.elemPicker.find("."+w),e=l.elemPicker.find("."+D),d=l.elemPicker.find("."+E),n=l.elemPicker.find("."+j),u=l.elemPicker.find("."+H),p=l.elemPicker.find("."+W),g=e[0].offsetTop/180*360,v=100-(n[0].offsetTop+3)/180*100,h=(n[0].offsetLeft+3)/260*100,m=Math.round(p[0].offsetLeft/280*100)/100,b=l.elemColorBox.find("."+B),i=l.elemPicker.find(".layui-colorpicker-pre").children("div"),k=function(e,i,o,r){l.select(e,i,o);var t=M({h:e,s:i,b:o});if(b.addClass(x).removeClass(C),a[0].style.background="rgb("+t.r+", "+t.g+", "+t.b+")","torgb"===s&&l.elemPicker.find("."+F).find("input").val("rgb("+t.r+", "+t.g+", "+t.b+")"),"rgba"===s){var n=0;n=280*r,p.css("left",n),l.elemPicker.find("."+F).find("input").val("rgba("+t.r+", "+t.g+", "+t.b+", "+r+")"),a[0].style.background="rgba("+t.r+", "+t.g+", "+t.b+", "+r+")",u[0].style.background="linear-gradient(to right, rgba("+t.r+", "+t.g+", "+t.b+", 0), rgb("+t.r+", "+t.g+", "+t.b+"))"}c.change&&c.change(l.elemPicker.find("."+F).find("input").val())},o=y(['<div class="layui-auxiliar-moving" id="LAY-colorpicker-moving"></div'].join("")),r=function(e){y("#LAY-colorpicker-moving")[0]||y("body").append(o),o.on("mousemove",e),o.on("mouseup",function(){o.remove()}).on("mouseleave",function(){o.remove()})};e.on("mousedown",function(e){var t=this.offsetTop,n=e.clientY,i=function(e){var i=t+(e.clientY-n),o=f[0].offsetHeight;i<0&&(i=0),i>o&&(i=o);var r=i/180*360;g=r,k(r,h,v,m),e.preventDefault()};r(i),e.preventDefault()}),f.on("click",function(e){var i=e.clientY-y(this).offset().top;i<0&&(i=0),i>this.offsetHeight&&(i=this.offsetHeight);var o=i/180*360;g=o,k(o,h,v,m),e.preventDefault()}),n.on("mousedown",function(e){var c=this.offsetTop,a=this.offsetLeft,s=e.clientY,f=e.clientX,i=function(e){var i=c+(e.clientY-s),o=a+(e.clientX-f),r=d[0].offsetHeight-3,t=d[0].offsetWidth-3;i<-3&&(i=-3),i>r&&(i=r),o<-3&&(o=-3),o>t&&(o=t);var n=(o+3)/260*100,l=100-(i+3)/180*100;v=l,h=n,k(g,n,l,m),e.preventDefault()};layui.stope(e),r(i),e.preventDefault()}),d.on("mousedown",function(e){var i=e.clientY-y(this).offset().top-3+I.scrollTop(),o=e.clientX-y(this).offset().left-3+I.scrollLeft();i<-3&&(i=-3),i>this.offsetHeight-3&&(i=this.offsetHeight-3),o<-3&&(o=-3),o>this.offsetWidth-3&&(o=this.offsetWidth-3);var r=(o+3)/260*100,t=100-(i+3)/180*100;v=t,h=r,k(g,r,t,m),e.preventDefault(),n.trigger(e,"mousedown")}),p.on("mousedown",function(e){var t=this.offsetLeft,n=e.clientX,i=function(e){var i=t+(e.clientX-n),o=u[0].offsetWidth;i<0&&(i=0),i>o&&(i=o);var r=Math.round(i/280*100)/100;m=r,k(g,h,v,r),e.preventDefault()};r(i),e.preventDefault()}),u.on("click",function(e){var i=e.clientX-y(this).offset().left;i<0&&(i=0),i>this.offsetWidth&&(i=this.offsetWidth);var o=Math.round(i/280*100)/100;m=o,k(g,h,v,o),e.preventDefault()}),i.each(function(){y(this).on("click",function(){y(this).parent(".layui-colorpicker-pre").addClass("selected").siblings().removeClass("selected");var e,i=this.style.backgroundColor,o=L(Y(i)),r=i.slice(i.lastIndexOf(",")+1,i.length-1);g=o.h,h=o.s,v=o.b,3==(i.match(/[0-9]{1,3}/g)||[]).length&&(r=1),m=r,e=280*r,k(o.h,o.s,o.b,r)})})},a.prototype.select=function(e,i,o,r){var t=this,n=(t.config,d({h:e,s:100,b:100})),l=d({h:e,s:i,b:o}),c=e/360*180,a=180-o/100*180-3,s=i/100*260-3;t.elemPicker.find("."+D).css("top",c),t.elemPicker.find("."+E)[0].style.background="#"+n,t.elemPicker.find("."+j).css({top:a,left:s}),"change"!==r&&t.elemPicker.find("."+F).find("input").val("#"+l)},a.prototype.pickerEvents=function(){var l=this,c=l.config,a=l.elemColorBox.find("."+P),s=l.elemPicker.find("."+F+" input"),o={clear:function(e){a[0].style.background="",l.elemColorBox.find("."+B).removeClass(x).addClass(C),l.color="",c.done&&c.done(""),l.removePicker()},confirm:function(e,i){var o=s.val(),r=o,t={};if(o.indexOf(",")>-1){if(t=L(Y(o)),l.select(t.h,t.s,t.b),a[0].style.background=r="#"+d(t),(o.match(/[0-9]{1,3}/g)||[]).length>3&&"rgba"===a.attr("lay-type")){var n=280*o.slice(o.lastIndexOf(",")+1,o.length-1);l.elemPicker.find("."+W).css("left",n),a[0].style.background=o,r=o}}else t=f(o),a[0].style.background=r="#"+d(t),l.elemColorBox.find("."+B).removeClass(C).addClass(x);return"change"===i?(l.select(t.h,t.s,t.b,i),void(c.change&&c.change(r))):(l.color=o,c.done&&c.done(o),void l.removePicker())}};l.elemPicker.on("click","*[colorpicker-events]",function(){var e=y(this),i=e.attr("colorpicker-events");o[i]&&o[i].call(this,e)}),s.on("keyup",function(e){var i=y(this);o.confirm.call(this,i,13===e.keyCode?null:"change")})},a.prototype.events=function(){var o=this,e=o.config,r=o.elemColorBox.find("."+P);o.elemColorBox.on("click",function(){o.renderPicker(),y(l)[0]&&(o.val(),o.side())}),e.elem[0]&&!o.elemColorBox[0].eventHandler&&(c.on("click",function(e){if(!y(e.target).hasClass(n)&&!y(e.target).parents("."+n)[0]&&!y(e.target).hasClass(l.replace(/\./g,""))&&!y(e.target).parents(l)[0]&&o.elemPicker){if(o.color){var i=L(Y(o.color));o.select(i.h,i.s,i.b)}else o.elemColorBox.find("."+B).removeClass(x).addClass(C);r[0].style.background=o.color||"",o.removePicker()}}),I.on("resize",function(){return!(!o.elemPicker||!y(l)[0])&&void o.position()}),o.elemColorBox[0].eventHandler=!0)},o.render=function(e){var i=new a(e);return r.call(i)},e(i,o)});